<div class="card">
  <div class="card-body">
    <h5 class="card-title"><%= @product.title %></h5>
    <p class="text-primary">Price: <%= number_to_currency(@product.price, precision: 2) %></p>
    <p class="card-text">Description: <%= @product.description %></p>
    <%= link_to "Edit Product", edit_product_path(@product), class: "btn btn-primary" %>
    <%= link_to 'Delete Product', 
        product_path(@product), 
        class: "btn btn-danger",
        method: :delete, 
        data: { confirm: 'Are you sure that you want to delete this product? '} 
    %>
  </div>
</div>



<%# 
    New Review Form 

    'form_for [@product, @review]' require there to be a method called 
    'product_reviews_path' defined in routes. Using the 'resources' method in 
    routes, this gets defined for us (see config/routes)

    @review is an empty reveiw (Review.new) defined in 'products#show'
 %>
<hr />
<h3>Leave a Review</h3>
<%= form_for [@product, @review] do |f| %>
    <% if @review.errors.present? %>
        <p>
            <%= @review.errors.full_messages.join(', ') %>
        </p>
    <% end %>

    <div class="form-group">
        <%= f.label :rating %>
        <%= f.number_field :rating, class: "form-control" %>
    </div>
    <div class="form-group">
        <%= f.label :body %>
        <%= f.text_area :body, class: "form-control" %>
    </div>
    <%= f.submit 'Leave a Review', class: 'btn btn-primary' %>
<% end %>

<hr />
<h3>Reviews</h3>
<%#
    Display all of the reviews for this product
%>

<% @reviews.each do |review| %>
    <ul class="list-group">
        <li class="list-group-item">
        <h3>Rating: <%= review.rating %></h3>
        <p><%= review.body %></p>
        <%= link_to 'Delete',
            review_path(review),
            class: "btn btn-danger brn-sm",
            method: :delete, 
            data: {
                confirm: 'Are you sure that you want to delete this review?'
            }
        %>
        </li>
    </ul>
<% end %>